<section class="menu-page">
    <div class="container">
        <!-- Page Header -->
        <div class="page-header">
            <span class="hero-badge">ğŸ½ï¸ Explore Our Menu</span>
            <h1>What's <span class="accent">Cooking?</span></h1>
            <p>Handcrafted dishes made with love and the freshest ingredients</p>
        </div>

        @if (errorMessage()) {
        <div class="error-msg">{{ errorMessage() }}</div>
        }

        <!-- Category Tabs -->
        @if (!loading()) {
        <div class="category-tabs">
            @for (cat of categories(); track cat) {
            <button class="tab" [class.active]="activeCategory() === cat" (click)="setCategory(cat)">
                {{ cat }}
            </button>
            }
        </div>
        }

        <!-- Menu Grid -->
        @if (loading()) {
        <div class="menu-loading">Loading menu from API...</div>
        } @else {
        <div class="menu-grid">
            @for (item of filteredItems(); track item.id) {
            <div class="menu-card">
                <div class="card-image">
                    <img [src]="item.image" [alt]="item.name" loading="lazy">
                    <span class="card-category">{{ item.category }}</span>
                    @if (getQuantity(item.id) > 0) {
                    <span class="card-qty-badge">{{ getQuantity(item.id) }} in cart</span>
                    }
                </div>
                <div class="card-body">
                    <div class="card-info">
                        <h3>{{ item.name }}</h3>
                        <p>{{ item.description }}</p>
                    </div>
                    <div class="card-footer">
                        <span class="price">{{ item.displayPrice }}</span>
                        <button class="btn-order" [class.added]="addedItem() === item.id"
                            (click)="addToCart(item)">
                            @if (addedItem() === item.id) {
                            âœ“ Added
                            } @else {
                            ğŸ›’ Add to Cart
                            }
                        </button>
                    </div>
                </div>
            </div>
            }
        </div>
        }

        <!-- Floating Cart Button -->
        @if (cartItemCount() > 0) {
        <a routerLink="/cart" class="floating-cart">
            ğŸ›’ View Cart
            <span class="cart-count">{{ cartItemCount() }}</span>
        </a>
        }
    </div>
</section>